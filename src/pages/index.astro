---
import HeaderPorto from "../components/HeaderPorto.astro";

import { getCollection } from "astro:content";
import Card from "../components/Card.astro";
const posts = await getCollection("blog");
const projects = await getCollection("projects");
const struggles = await getCollection("struggle");

import "../styles/home.css";
import "../styles/swiper-bundle.min.css";
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout>
  <HeaderPorto />

  <main>
    <section id="blog" class="blog-section">
      <h2 class="blog-title">🐾 Blog Terminal</h2>
      <p class="blog-subtitle">
        Antara kopi ☕, error 💥, dan kucing yang duduk di keyboard 🐱.
      </p>
      <div class="swiper blog-swiper" id="blog-swiper">
        <div class="swiper-wrapper">
          {
            posts.map((post) => (
              <div class="swiper-slide">
                <Card
                  title={post.data.title}
                  description={post.data.description}
                  url={`/blog/${post.slug}/`}
                />
              </div>
            ))
          }
        </div>

        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>

      <!-- Swiper Container -->
    </section>

    <!-- Swiper JS -->

    <section class="projects">
      <h2>🚀 Project Meme</h2>
      <p>
        Kumpulan karya ngoding yang lahir antara kopi, error, dan sedikit
        kewarasan 🤯
      </p>

      <div class="project-list">
        {
          projects.map((project) => (
            <div class="project-card">
              <h3>{project.data.title}</h3>
              <p>{project.data.description}</p>
              <a href={"astro/" + project.data.url}>
                🔗 {project.data.cta ?? "Lihat Project"}
              </a>
            </div>
          ))
        }
      </div>
    </section>

    <section class="struggle">
      <h2>⚡ Daily Struggle Programmer</h2>
      <div class="struggle-list">
        {
          struggles.map((s) => (
            <div class="struggle-item">
              <img src={s.data.image} alt={s.data.title} />
              <p>{s.data.title}</p>
              <small>~{s.data.quote}</small>
            </div>
          ))
        }
      </div>
    </section>

    <section id="satire-quotes" style="text-align:center; margin-top:50px;">
      <h2
        style="font-size:2.5rem;
			 background:linear-gradient(90deg, #ff9966, #ff5e62);
			 -webkit-background-clip:text;
			 -webkit-text-fill-color:transparent;"
      >
        Wisdom (?) of The Day 💡
      </h2>
      <blockquote
        id="quote"
        style="font-size:1.3rem; font-style:italic; margin:20px auto; max-width:600px;"
      >
        Loading satire...
      </blockquote>
    </section>

    <script>
      const quotes = [
        `"The only constant is change." → Kecuali kode legacy, itu konstan selamanya.`,
        `"Knowledge is power." → Tapi kalau dokumentasi hilang, kekuatannya ikut hilang.`,
        `"Fail fast, fail often." → Alias deploy ke production tiap Jumat sore.`,
        `"Simplicity is the ultimate sophistication." → Maka dari itu, hapus semua fitur → masalah selesai.`,
        `"To err is human." → To blame it on intern is tradition.`,
        `"The only constant is change." → Kecuali kode legacy, itu konstan selamanya.`,
        `"Knowledge is power." → Tapi kalau dokumentasi hilang, kekuatannya ikut hilang.`,
        `"Fail fast, fail often." → Alias deploy ke production tiap Jumat sore.`,
        `"Simplicity is the ultimate sophistication." → Maka dari itu, hapus semua fitur → masalah selesai.`,
        `"To err is human." → To blame it on intern is tradition.`,
        `"When nothing works, try harder." → Atau langsung install ulang Windows, lebih cepat.`,
        `"Great problems need great solutions." → Blue Screen? Solusinya ganti laptop.`,
      ];

      document.getElementById("quote").innerText =
        quotes[Math.floor(Math.random() * quotes.length)];
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.slim.min.js"
      integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"
      integrity="sha512-Ysw1DcK1P+uYLqprEAzNQJP+J4hTx4t/3X2nbVwszao8wD+9afLjBQYjz7Uk4ADP+Er++mJoScI42ueGtQOzEA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"></script>

    <script>
      const swiper = new Swiper("#blog-swiper", {
        slidesPerView: 1, // default 1 card per slide
        spaceBetween: 20,
        loop: false,
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
        breakpoints: {
          768: { slidesPerView: 2 }, // tablet: 2 card
          1024: { slidesPerView: 4 }, // desktop: 3 card
        },
      });
    </script>

    <!-- 🐱 Kucing GIF -->
  </main>
</BaseLayout>
